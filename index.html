<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Will you be my Valentine, PB?</title>

  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --pink: #ffc0e0;
      --pink-light: #ffe5f3;
      --pink-dark: #ff85c1;
      --blue: #c2e0ff;
      --blue-light: #e8f4ff;
      --blue-dark: #7dc4ff;
      --purple: #e5d4ff;
      --gradient-romantic: linear-gradient(135deg, #ffe5f3 0%, #ffc0e0 25%, #e5d4ff 50%, #c2e0ff 75%, #e8f4ff 100%);
      --heartCursor: auto;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--gradient-romantic);
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
      position: relative;
      padding: 20px;
      cursor: var(--heartCursor, auto);
    }

    body::before {
      content: 'ğŸ’• ğŸ’ ğŸ’– âœ¨ ğŸ’— ğŸŒ¸ ğŸ’• ğŸ’ ğŸ’– âœ¨ ğŸ’— ğŸŒ¸ ğŸ’• ğŸ’ ğŸ’– âœ¨ ğŸ’— ğŸŒ¸';
      position: fixed;
      inset: 0;
      font-size: 30px;
      line-height: 100px;
      opacity: 0.15;
      pointer-events: none;
      animation: float-hearts 40s linear infinite;
      white-space: pre-wrap;
      word-spacing: 50px;
    }

    body::after {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(circle at 15% 25%, rgba(255, 192, 224, 0.4) 0%, transparent 40%),
        radial-gradient(circle at 85% 75%, rgba(194, 224, 255, 0.4) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, rgba(229, 212, 255, 0.3) 0%, transparent 50%);
      pointer-events: none;
      animation: float 25s ease-in-out infinite;
    }

    @keyframes float-hearts {
      0% { transform: translateY(100vh); }
      100% { transform: translateY(-100vh); }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
      50% { transform: translateY(-30px) scale(1.1); opacity: 0.8; }
    }

    /* Confetti Canvas */
    #confettiCanvas {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }

    .container { width: 100%; max-width: 900px; position: relative; z-index: 10; }

    .card {
      background: transparent;
      padding: 50px 40px;
      text-align: center;
      box-shadow: none;
      border: none;
    }

    .art {
      width: 280px;
      margin: 0 auto 20px;
      display: block;
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.1));
      animation: gentle-bounce 3s ease-in-out infinite;
    }
    @keyframes gentle-bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(32px, 5vw, 52px);
      font-weight: 700;
      color: #ff1f68;
      margin: 20px 0;
      line-height: 1.2;
      text-shadow: 0 2px 8px rgba(255, 255, 255, 0.8), 0 4px 16px rgba(255, 31, 104, 0.3);
    }

    .button-zone {
      position: relative;
      width: 100%;
      max-width: 760px;
      height: 220px;
      margin: 40px auto 20px;
      touch-action: none;
    }

    button {
      position: absolute;
      padding: 18px 40px;
      font-size: 20px;
      font-weight: 600;
      border-radius: 50px;
      border: none;
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text y="28" font-size="28">ğŸ‘†</text></svg>') 16 16, pointer;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: all 0.2s ease;
      font-family: 'Poppins', sans-serif;
      z-index: 1000;
    }

    #yesBtn {
      left: 18%;
      top: 52%;
      transform: translateY(-50%);
      background: linear-gradient(135deg, var(--pink-dark), var(--pink), var(--pink-light));
      color: white;
      border: 3px solid rgba(255, 255, 255, 0.9);
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }
    #yesBtn::before { content: 'âœ¨'; position: absolute; left: 10px; animation: sparkle 1.5s ease-in-out infinite; }
    #yesBtn::after  { content: 'âœ¨'; position: absolute; right: 10px; animation: sparkle 1.5s ease-in-out infinite 0.75s; }
    @keyframes sparkle {
      0%, 100% { opacity: 0.3; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }
    #yesBtn:hover {
      box-shadow: 0 20px 50px rgba(255, 133, 193, 0.5);
      background: linear-gradient(135deg, #ff70b0, var(--pink-dark), var(--pink));
    }

    #noBtn {
      left: 72%;
      top: 75%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, #ffffff, #f8f8f8);
      color: #999;
      border: 3px solid #ffe5f3;
      font-style: italic;
    }

    .result { display: none; animation: fadeIn 0.5s ease; }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .result h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(28px, 4.5vw, 48px);
      color: #ff1f68;
      margin: 20px 0;
      text-shadow: 0 2px 8px rgba(255, 255, 255, 0.9), 0 4px 16px rgba(255, 31, 104, 0.4);
      font-weight: 700;
    }

    .celebration-gif {
      width: min(350px, 90vw);
      margin: 20px auto;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    }

    .activities-section { display: none; margin-top: 40px; animation: slideUp 0.6s ease; }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .activities-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(28px, 4vw, 40px);
      color: #ff1f68;
      text-shadow: 0 2px 8px rgba(255, 255, 255, 0.9), 0 4px 16px rgba(255, 31, 104, 0.4);
      margin: 30px 0 20px;
      font-weight: 700;
    }

    .activity-card { background: transparent; border-radius: 25px; padding: 35px; margin: 25px 0; }
    .lock-icon {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--pink-dark);
      background: linear-gradient(135deg, rgba(255, 192, 224, 0.3), rgba(194, 224, 255, 0.3));
      padding: 10px 20px;
      border-radius: 20px;
      display: inline-block;
    }

    .activity-question {
      font-size: 18px;
      font-weight: 500;
      color: #333;
      margin: 15px 0;
      text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
    }

    .activity-input {
      width: 100%;
      max-width: 320px;
      padding: 14px 24px;
      font-size: 16px;
      border: 3px solid var(--pink-light);
      border-radius: 30px;
      margin: 15px auto 10px;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.95);
      display: block;
    }
    .activity-input:focus {
      outline: none;
      border-color: var(--pink);
      box-shadow: 0 0 20px rgba(255, 192, 224, 0.4);
    }

    .unlock-btn {
      position: static;
      background: linear-gradient(135deg, var(--blue-dark), var(--blue), var(--blue-light));
      color: white;
      border: 3px solid rgba(255, 255, 255, 0.9);
      padding: 14px 35px;
      border-radius: 30px;
      font-size: 17px;
      font-weight: 700;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      display: inline-block;
      margin: 15px auto 15px auto;
      transition: all 0.3s ease;
      max-width: 220px;
    }
    .unlock-btn::before { content: 'ğŸ”“ '; }
    .unlock-btn:hover { transform: scale(1.05); box-shadow: 0 10px 30px rgba(125, 196, 255, 0.5); }

    .activity-content {
      display: none;
      margin-top: 20px;
      font-size: 20px;
      font-weight: 500;
      color: var(--pink-dark);
      text-shadow: 0 2px 6px rgba(255, 255, 255, 0.9);
    }

    .error-msg { color: #ff4444; font-size: 14px; margin-top: 10px; display: none; }

    .final-reveal {
      display: none;
      margin-top: 40px;
      padding: 50px;
      background: transparent;
      border-radius: 35px;
    }

    .final-reveal h3 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(30px, 4vw, 44px);
      color: var(--pink-dark);
      margin-bottom: 25px;
      font-weight: 700;
      text-shadow: 0 2px 8px rgba(255, 255, 255, 0.9);
    }

    .final-reveal p { text-shadow: 0 2px 6px rgba(255, 255, 255, 0.8); }

    @media (max-width: 768px) {
      .card { padding: 30px 20px; }
      button { padding: 14px 28px; font-size: 16px; }
      .button-zone { height: 200px; }
      #yesBtn { left: 12%; }
    }
  </style>
</head>

<body>
  <canvas id="confettiCanvas"></canvas>

  <!-- Background Music
       NOTE: True "autoplay with sound" is blocked on many browsers.
       This will autoplay muted on load, then unmute on first tap/click anywhere. -->
  <audio id="bgMusic" loop preload="auto" autoplay muted playsinline>
    <source src="Love Story (Fast Piano Ver.).mp3" type="audio/mpeg">
  </audio>

  <div class="container">
    <main class="card" id="mainCard">
      <!-- Romantic Animal with Heart -->
      <svg class="art" viewBox="0 0 320 240" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="fur" x1="0" x2="1">
            <stop offset="0" stop-color="#ffb6d9"/>
            <stop offset="1" stop-color="#ff6bb5"/>
          </linearGradient>
          <linearGradient id="heart" x1="0" x2="1">
            <stop offset="0" stop-color="#ff6bb5"/>
            <stop offset="1" stop-color="#ff4d7d"/>
          </linearGradient>
        </defs>

        <path d="M250 50 C250 33 270 25 282 38
                 C294 25 314 33 314 50
                 C314 78 282 92 282 106
                 C282 92 250 78 250 50Z"
              fill="url(#heart)">
          <animateTransform attributeName="transform" type="scale" values="1;1.1;1" dur="1.5s" repeatCount="indefinite" additive="sum"/>
        </path>

        <path d="M90 120 C90 70 140 40 190 60
                 C240 40 290 70 290 120
                 C290 180 240 210 190 210
                 C140 210 90 180 90 120Z"
              fill="url(#fur)"/>

        <path d="M110 92 L95 55 L140 78 Z" fill="#ff6bb5"/>
        <path d="M270 92 L285 55 L240 78 Z" fill="#ff6bb5"/>

        <circle cx="160" cy="130" r="8"/>
        <circle cx="220" cy="130" r="8"/>

        <path d="M190 144 C186 144 182 148 182 152
                 C182 160 190 164 190 170
                 C190 164 198 160 198 152
                 C198 148 194 144 190 144Z"
              fill="#ff7aa2"/>
      </svg>

      <h1>Hey PB, your Pollywag has a question... will you be my Valentine forever? ğŸ’•</h1>

      <section class="button-zone" id="zone">
        <button id="yesBtn" type="button">Yes! ğŸ’•</button>
        <button id="noBtn" type="button">Maybe not...</button>
      </section>

      <!-- Success Message -->
      <section class="result" id="result">
        <h2>You just made me the happiest! I love you, PB ğŸ’•</h2>
        <img class="celebration-gif" src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif" alt="Celebration" />
      </section>

      <!-- Activities Section -->
      <section class="activities-section" id="activitiesSection">
        <h3 class="activities-title">Our Valentine's Day 2026 ğŸ’</h3>
        <p style="color: #ff6bb5; margin-bottom: 30px; font-weight: 600; font-size: 17px;">
          Unlock each surprise by answering the questions below! ğŸ’•<br>
          <span style="font-size: 15px; color: #ff85c1; font-style: italic;">
            (P.S. If you cannot unlock any one, that activity gets cancelled ğŸ˜âœ¨)
          </span>
        </p>

        <!-- Activity 1 -->
        <div class="activity-card" id="activity1">
          <div class="lock-icon">ğŸŒ… Morning Perks</div>
          <div class="activity-question">When did we go on our first date?</div>
          <input type="text" class="activity-input" id="input1" placeholder="DD Month YYYY" autocomplete="off">
          <button class="unlock-btn" id="unlock1" type="button">Unlock</button>
          <div class="error-msg" id="error1">Not quite! Try again ğŸ’•</div>
          <div class="activity-content" id="content1">
            <div style="font-size: 36px; margin-bottom: 15px;">â˜€ï¸ğŸ¥ğŸ’‹</div>
            <strong>Good morning breakfast in bed with a kiss</strong>
          </div>
        </div>

        <!-- Activity 2 -->
        <div class="activity-card" id="activity2">
          <div class="lock-icon">â˜€ï¸ Afternoon Perks</div>
          <div class="activity-question">Where did our story spark?</div>
          <input type="text" class="activity-input" id="input2" placeholder="City name" autocomplete="off">
          <button class="unlock-btn" id="unlock2" type="button">Unlock</button>
          <div class="error-msg" id="error2">Not quite! Try again ğŸ’•</div>
          <div class="activity-content" id="content2">
            <div style="font-size: 36px; margin-bottom: 15px;">ğŸ›ï¸ğŸ’•</div>
            <strong>Shopping spree together</strong>
          </div>
        </div>

        <!-- Activity 3 -->
        <div class="activity-card" id="activity3">
          <div class="lock-icon">ğŸŒ† Evening Perks</div>
          <div class="activity-question">What's your favorite thing to do with me?</div>
          <input type="text" class="activity-input" id="input3" placeholder="Your answer" autocomplete="off">
          <button class="unlock-btn" id="unlock3" type="button">Unlock</button>
          <div class="error-msg" id="error3">Not quite! Try again ğŸ’•</div>
          <div class="activity-content" id="content3">
            <div style="font-size: 36px; margin-bottom: 15px;">ğŸ¬ğŸ¿</div>
            <strong>Wuthering Heights movie together</strong>
          </div>
        </div>

        <!-- Activity 4 -->
        <div class="activity-card" id="activity4">
          <div class="lock-icon">ğŸŒ™ Night Perks</div>
          <div class="activity-question">When did u first say "I love you"?</div>
          <input type="text" class="activity-input" id="input4" placeholder="DD Month YYYY" autocomplete="off">
          <button class="unlock-btn" id="unlock4" type="button">Unlock</button>
          <div class="error-msg" id="error4">Not quite! Try again ğŸ’•</div>
          <div class="activity-content" id="content4">
            <div style="font-size: 36px; margin-bottom: 15px;">ğŸ½ï¸ğŸŒ¹</div>
            <strong>Romantic dinner date</strong>
          </div>
        </div>

        <!-- Final Reveal -->
        <div class="final-reveal" id="finalReveal">
          <h3>ğŸ‰ All surprises unlocked! ğŸ‰</h3>
          <p style="font-size: 20px; color: #666;">Get ready for the best Valentine's Day ever! ğŸ’•âœ¨</p>
        </div>
      </section>
    </main>
  </div>

  <script>
    const zone = document.getElementById("zone");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const activitiesSection = document.getElementById("activitiesSection");
    const finalReveal = document.getElementById("finalReveal");
    const bgMusic = document.getElementById("bgMusic");

    // Correct answers
    const ANSWERS = {
      1: "22 june 2024",
      2: "goa",
      3: "cuddle",
      4: "1 dec 2024"
    };

    let unlockedCount = 0;

    /* ---------- BEATING HEART CURSOR ---------- */
    (function beatingHeartCursor() {
      const stroke = "#ff5c93";
      const strokeWidth = 2.2;

      const svgSmall = `
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
          <g transform="translate(16 16) scale(0.92) translate(-16 -16)">
            <path d="M16 26
                     C16 26 5 18.8 5 11.8
                     C5 8.4 7.5 6.2 10.2 6.2
                     C12.3 6.2 14 7.4 15 9
                     C16 7.4 17.7 6.2 19.8 6.2
                     C22.5 6.2 25 8.4 25 11.8
                     C25 18.8 16 26 16 26Z"
                  fill="none"
                  stroke="${stroke}"
                  stroke-width="${strokeWidth}"
                  stroke-linejoin="round"
                  stroke-linecap="round"/>
          </g>
        </svg>`.trim();

      const svgBig = `
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
          <g transform="translate(16 16) scale(1.05) translate(-16 -16)">
            <path d="M16 26
                     C16 26 5 18.8 5 11.8
                     C5 8.4 7.5 6.2 10.2 6.2
                     C12.3 6.2 14 7.4 15 9
                     C16 7.4 17.7 6.2 19.8 6.2
                     C22.5 6.2 25 8.4 25 11.8
                     C25 18.8 16 26 16 26Z"
                  fill="none"
                  stroke="${stroke}"
                  stroke-width="${strokeWidth}"
                  stroke-linejoin="round"
                  stroke-linecap="round"/>
          </g>
        </svg>`.trim();

      const toCursorUrl = (svg) => `url("data:image/svg+xml,${encodeURIComponent(svg)}") 16 16, auto`;
      const frames = { small: toCursorUrl(svgSmall), big: toCursorUrl(svgBig) };

      const beatPattern = [
        { frame: "small", ms: 260 },
        { frame: "big",   ms: 120 },
        { frame: "small", ms: 260 },
        { frame: "big",   ms: 120 }
      ];

      let i = 0;
      function tick() {
        document.body.style.setProperty("--heartCursor", frames[beatPattern[i].frame]);
        const delay = beatPattern[i].ms;
        i = (i + 1) % beatPattern.length;
        setTimeout(tick, delay);
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", tick, { once: true });
      } else {
        tick();
      }
    })();

    /* ---------- MUSIC: autoplay muted, unmute on first interaction ---------- */
    bgMusic.volume = 0.0;
    bgMusic.muted = true;

    function startMutedAutoplay() {
      const p = bgMusic.play();
      if (p && typeof p.then === "function") p.catch(() => {});
    }
    document.addEventListener("DOMContentLoaded", startMutedAutoplay);
    window.addEventListener("load", startMutedAutoplay);

    function unmuteAndFadeIn() {
      bgMusic.muted = false;
      bgMusic.play().catch(() => {});

      const target = 0.5;
      const step = 0.05;
      const interval = 60;

      let v = 0.0;
      bgMusic.volume = v;

      const t = setInterval(() => {
        v = Math.min(target, v + step);
        bgMusic.volume = v;
        if (v >= target) clearInterval(t);
      }, interval);
    }

    // Any first interaction un-mutes and fades in
    window.addEventListener("pointerdown", unmuteAndFadeIn, { once: true });
    window.addEventListener("touchstart", unmuteAndFadeIn, { once: true });
    window.addEventListener("keydown", unmuteAndFadeIn, { once: true });

    /* ---------- CONFETTI (crisp on retina) ---------- */
    const confettiCanvas = document.getElementById("confettiCanvas");

    function resizeConfettiCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(window.innerWidth * dpr);
      confettiCanvas.height = Math.floor(window.innerHeight * dpr);
      confettiCanvas.style.width = window.innerWidth + "px";
      confettiCanvas.style.height = window.innerHeight + "px";
    }

    resizeConfettiCanvas();
    window.addEventListener("resize", resizeConfettiCanvas);

    const confettiInstance = confetti.create(confettiCanvas, {
      resize: false,
      useWorker: true
    });

    function fullScreenConfetti() {
      const end = Date.now() + 2000;
      (function frame() {
        confettiInstance({
          particleCount: 15,
          spread: 100,
          startVelocity: 50,
          origin: { x: Math.random(), y: Math.random() * 0.4 },
          colors: ['#ffb6d9', '#ff6bb5', '#a8d8ff', '#5eb3ff']
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    /* ---------- NO BUTTON DODGE (stays inside zone) ---------- */
    const noTexts = [
      "Maybe not...",
      "No (u crazy)",
      "No (lost ur brains?)",
      "Nope nope nope",
      "Are u serious? ğŸ˜…",
      "Not happening!",
      "Nice try ğŸ˜",
      "Umm... no?",
      "Keep dreaming ğŸ’­",
      "Absolutely not!",
      "Try the other button ğŸ‘‰",
      "Wrong button babe"
    ];

    let noTextIndex = 0;
    let lastMoveTime = 0;

    function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

    function moveNoInsideZone(clientX, clientY) {
      const zoneRect = zone.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();
      const btnW = btnRect.width;
      const btnH = btnRect.height;

      const pad = 10;

      const targetX = zoneRect.left + pad + Math.random() * (zoneRect.width - btnW - pad * 2);
      const targetY = zoneRect.top  + pad + Math.random() * (zoneRect.height - btnH - pad * 2);

      const leftPx = clamp(targetX - zoneRect.left, 0, zoneRect.width - btnW);
      const topPx  = clamp(targetY - zoneRect.top,  0, zoneRect.height - btnH);

      noBtn.style.left = (leftPx + btnW / 2) + "px";
      noBtn.style.top  = (topPx  + btnH / 2) + "px";
      noBtn.style.transform = "translate(-50%, -50%)";

      const now = Date.now();
      if (now - lastMoveTime > 600) {
        noTextIndex = (noTextIndex + 1) % noTexts.length;
        noBtn.textContent = noTexts[noTextIndex];
        lastMoveTime = now;
      }
    }

    function maybeDodge(clientX, clientY) {
      const b = noBtn.getBoundingClientRect();
      const d = Math.hypot((b.left + b.width / 2) - clientX, (b.top + b.height / 2) - clientY);
      if (d < 140) moveNoInsideZone(clientX, clientY);
    }

    zone.addEventListener("pointermove", (e) => maybeDodge(e.clientX, e.clientY), { passive: true });
    zone.addEventListener("touchmove", (e) => {
      const t = e.touches && e.touches[0];
      if (t) maybeDodge(t.clientX, t.clientY);
    }, { passive: true });

    noBtn.addEventListener("click", (e) => e.preventDefault());

    /* ---------- YES CLICK ---------- */
    yesBtn.addEventListener("click", () => {
      zone.style.display = "none";
      result.style.display = "block";
      resizeConfettiCanvas();
      fullScreenConfetti();

      setTimeout(() => {
        activitiesSection.style.display = "block";
        activitiesSection.scrollIntoView({ behavior: 'smooth' });
      }, 1500);
    });

    /* ---------- UNLOCK LOGIC ---------- */
    function normalize(s) {
      return (s || "")
        .toLowerCase()
        .trim()
        .replace(/[.,]/g, "")
        .replace(/\s+/g, " ");
    }

    function normalizeCompact(s) {
      return normalize(s).replace(/[\s\-\/]/g, "");
    }

    function unlockActivity(num, correctAnswer) {
      const input = document.getElementById(`input${num}`);
      const content = document.getElementById(`content${num}`);
      const error = document.getElementById(`error${num}`);
      const card = document.getElementById(`activity${num}`);
      const lockIcon = card.querySelector('.lock-icon');
      const unlockBtn = document.getElementById(`unlock${num}`);

      const userAnswer = normalize(input.value);
      const correct = normalize(correctAnswer);

      let isCorrect = false;

      if (num === 1) {
        const u = normalizeCompact(userAnswer);
        isCorrect = [
          "22june2024","22jun2024","22062024","06222024","june222024","jun222024"
        ].some(v => u.includes(v));
      } else if (num === 2) {
        isCorrect = ["goa", "goa india", "goa, india"].includes(userAnswer);
      } else if (num === 3) {
        isCorrect = ["cuddle","cuddling","cuddles","sleep","sleeping","sleep together","cuddle with you","sleep with you"]
          .some(v => userAnswer.includes(v));
      } else if (num === 4) {
        const u = normalizeCompact(userAnswer);
        isCorrect = [
          "1dec2024","1december2024","01122024","1/12/2024","01/12/2024",
          "dec12024","december12024","12/1/2024","12/01/2024"
        ].some(v => u.includes(normalizeCompact(v)));
      }

      if (isCorrect) {
        error.style.display = "none";
        input.style.display = "none";
        unlockBtn.style.display = "none";
        card.querySelector('.activity-question').style.display = "none";
        lockIcon.textContent = "âœ…";
        content.style.display = "block";

        confettiInstance({
          particleCount: 120,
          spread: 80,
          origin: { y: 0.6 },
          colors: ['#ffb6d9', '#ff6bb5', '#a8d8ff', '#5eb3ff']
        });

        unlockedCount++;
        if (unlockedCount === 4) {
          setTimeout(() => {
            finalReveal.style.display = "block";
            finalReveal.scrollIntoView({ behavior: 'smooth' });

            setTimeout(() => {
              confettiInstance({
                particleCount: 320,
                spread: 180,
                startVelocity: 60,
                origin: { y: 0.5 },
                colors: ['#ffb6d9', '#ff6bb5', '#a8d8ff', '#5eb3ff']
              });
            }, 500);
          }, 800);
        }
      } else {
        error.style.display = "block";
        input.style.borderColor = "#ff4444";
        setTimeout(() => { input.style.borderColor = ""; }, 1200);
      }
    }

    // Wire unlock buttons
    document.getElementById("unlock1").addEventListener("click", () => unlockActivity(1, ANSWERS[1]));
    document.getElementById("unlock2").addEventListener("click", () => unlockActivity(2, ANSWERS[2]));
    document.getElementById("unlock3").addEventListener("click", () => unlockActivity(3, ANSWERS[3]));
    document.getElementById("unlock4").addEventListener("click", () => unlockActivity(4, ANSWERS[4]));

    // âœ… ENTER = click the respective unlock button (per input)
    [1,2,3,4].forEach((n) => {
      const input = document.getElementById(`input${n}`);
      const btn = document.getElementById(`unlock${n}`);
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          btn.click();
        }
      });
    });
  </script>
</body>
</html>
